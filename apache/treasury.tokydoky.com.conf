# Treasury Intelligence Platform — Apache Virtual Host
# treasury.tokydoky.com → Next.js on port 3001
#
# Ubuntu/Debian: copy to /etc/apache2/sites-available/ then run:
#   sudo a2ensite treasury.tokydoky.com.conf && sudo systemctl reload apache2
#
# Amazon Linux: copy to /etc/httpd/conf.d/ then run:
#   sudo systemctl reload httpd

<VirtualHost *:80>
    ServerName treasury.tokydoky.com

    # Proxy all traffic to Next.js
    ProxyPreserveHost On
    ProxyRequests Off

    ProxyPass / http://127.0.0.1:3002/
    ProxyPassReverse / http://127.0.0.1:3002/

    # Pass real client IP to Next.js
    RequestHeader set X-Forwarded-Proto "http"
    RequestHeader set X-Real-IP %{REMOTE_ADDR}s

    # Logging — separate files, won't affect other sites
    ErrorLog  /var/log/apache2/treasury-error.log
    CustomLog /var/log/apache2/treasury-access.log combined
</VirtualHost>

# To add SSL later (recommended for production):
#   sudo apt install certbot python3-certbot-apache   (Ubuntu)
#   sudo certbot --apache -d treasury.tokydoky.com
